{% load i18n characters_extras rules_extras thumbnail %}

<div class="card mb-3">
  <div class="card-header">
    {{ riot_gear }}
    {% if riot_gear.concealment %}
      <span class="float-end"><i
              class="fas fa-eye-slash fa-fw"></i> {% color_value_span riot_gear.concealment 6 invert=True %}</span>
    {% endif %}
  </div>
  <div class="card-body">
    {% if riot_gear.type.is_shield %}
      <i class="fas fa-shield-alt fa-fw"></i> {% trans 'Cover' %}:
      {% color_value_span riot_gear.shield_cover 6 invert=True %}+<br>
    {% else %}
      <i class="fas fa-shield-alt fa-fw"></i> {% trans 'Protection' %}:
      {% color_value_span riot_gear.protection_ballistic 3 %}<br>
    {% endif %}
    <i class="fas fa-weight fa-fw"></i> {% trans 'Encumbrance' %}: {% color_value_span riot_gear.encumbrance 5 invert=True %}<br>
    <i class="fas fa-balance-scale fa-fw"></i> {% trans 'Weight' %}: {{ riot_gear.weight }}<br>

    {% if character %}
      {% with currency_unit=character.common_currency_unit %}
        <form action="{% url 'characters:add_riot_gear' pk=character.id riot_gear_pk=riot_gear.id %}" method="post"
              class="float-end add-form">
          {% csrf_token %}
          <input type="hidden" name="riot_gear_id" value="{{ riot_gear.id }}">
          <button type="submit" class="btn btn-primary btn-sm float-end"
                  data-danger="{% trans 'Not possible' %}" data-success="{% trans 'Added' %}">
            {% trans 'Add' %}
            <i class="ms-1 {{ currency_unit.fa_icon_class }} {{ currency_unit.color_class }}"></i>
            {% color_value_span riot_gear.price 2000 invert=True %}
          </button>
        </form>
      {% endwith %}
    {% endif %}

    {% if user.is_superuser %}
      <a href="{% url 'admin:armory_riotgear_change' riot_gear.id %}"
         style="position: absolute; bottom: 2px; left: 2px; font-size: xx-small">admin</a>
    {% endif %}
  </div>
</div>
