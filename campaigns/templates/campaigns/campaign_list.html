{% extends 'base.html' %}
{% load i18n static thumbnail characters_extras %}

{% block content %}
    <div class="row">
        <div class="col-md-12">
            {% with extension=request.world_configuration.world.extension %}
                {% if extension %}
                    {% if extension.fixed_epoch %}
                        {% if extension.fixed_extensions.exists %}
                            <a class="btn btn-primary btn-lg float-end mb-2" href="{% url 'campaigns:create_data' world_pk=extension.id epoch_pk=extension.fixed_epoch.id %}">{% trans 'Create a campaign' %}</a>
                        {% else %}
                            <a class="btn btn-primary btn-lg float-end mb-2" href="{% url 'campaigns:create_extensions' world_pk=extension.id epoch_pk=extension.fixed_epoch.id %}">{% trans 'Create a campaign' %}</a>
                        {% endif %}
                    {% else %}
                        <a class="btn btn-primary btn-lg float-end mb-2" href="{% url 'campaigns:create_epoch' world_pk=extension.id %}">{% trans 'Create a campaign' %}</a>
                    {% endif %}
                {% else %}
                    <a class="btn btn-primary btn-lg float-end mb-2" href="{% url 'campaigns:create' %}">{% trans 'Create a campaign' %}</a>
                {% endif %}
            {% endwith %}
        </div>
    </div>
    <div class="row character-list">
        {% for object in object_list %}
            <div class="col-12 col-md-6 mb-3">
                <a href="{{ object.get_absolute_url }}">
                    <div class="card campaign-list-item" style="
                            background-size: 100%;
                            {% if object.backdrop_image %}
                                {% thumbnail object.backdrop_image "800" as im %}
                                    background-image: url({{ im.url }})
                                {% endthumbnail %}
                            {% else %}
                                {% if object.epoch.image %}
                                    {% thumbnail object.epoch.image "800" as im %}
                                        background-image: url({{ im.url }})
                                    {% endthumbnail %}
                                {% else %}
                                    background-color: silver
                                {% endif %}
                            {% endif %}
                            ">
                        <div class="card-body text-center p-4">
                            <h3>{{ object.name }}</h3>
                            {% blocktrans with t_gm=object.created_by %}
                                A campaign by {{ t_gm }}
                            {% endblocktrans %}
                        </div>
                    </div>
                </a>
            </div>
        {% endfor %}
    </div>
{% endblock %}
