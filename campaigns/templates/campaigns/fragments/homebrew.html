{% load i18n thumbnail static armory_extras rules_extras %}

{% block fragment %}
    <div class="row mt-3">
        {% if may_edit %}
            <div class="col-12 text-end">
                <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        {% trans "Create custom" %}
                    </button>
                    <ul class="dropdown-menu">
                        <li>
                            <a
                                class="dropdown-item modal-trigger"
                                data-url="{% url 'homebrew:xhr_create_item' %}?campaign_pk={{ object.id }}"
                                data-bs-toggle="modal"
                                data-bs-target=".page-modal"
                                data-modal-title="{% trans 'Create Item' %}"
                                href="">{% trans "Create custom item" %}</a>
                        </li>
                        <li>
                            <a
                                data-url="{% url 'homebrew:xhr_create_weapon' %}?campaign_pk={{ object.id }}"
                                data-bs-toggle="modal"
                                data-bs-target=".page-modal"
                                data-modal-title="{% trans 'Create Weapon' %}"
                                class="dropdown-item modal-trigger" href="#">{% trans "Create custom weapon" %}</a>
                        </li>
                        <li>
                            <a
                                data-url="{% url 'homebrew:xhr_create_riot_gear' %}?campaign_pk={{ object.id }}"
                                data-bs-toggle="modal"
                                data-bs-target=".page-modal"
                                data-modal-title="{% trans 'Create Armour' %}"
                                class="dropdown-item modal-trigger" href="#">{% trans "Create custom armour" %}</a>
                        </li>
                        <li>
                            <a
                                data-url="{% url 'homebrew:xhr_create_base_spell' %}?campaign_pk={{ object.id }}"
                                data-bs-toggle="modal"
                                data-bs-target=".page-modal"
                                data-modal-title="{% trans 'Create Spell' %}"
                                class="dropdown-item modal-trigger" href="#">{% trans "Create custom spell" %}</a>
                        </li>
                    </ul>
                </div>
            </div>
        {% endif %}
    </div>
    <div class="row homebrew-container mt-3">
        {% for item in object.homebrew_armory_item_set.all %}
            <div class="col-12 col-md-4">
                {% item_widget item %}
            </div>
        {% endfor %}
        {% for weapon in object.homebrew_armory_weapon_set.all %}
            <div class="col-12 col-md-4">
                {% weapon_widget weapon %}
            </div>
        {% endfor %}
        {% for riot_gear in object.homebrew_armory_riot_gear_set.all %}
            <div class="col-12 col-md-4">
                {% riot_gear_widget riot_gear %}
            </div>
        {% endfor %}
        {% for spell in object.homebrew_magic_basespell_set.all %}
            <div class="col-12 col-md-4">
                {% basespell_widget spell %}
            </div>
        {% endfor %}
    </div>
{% endblock %}
