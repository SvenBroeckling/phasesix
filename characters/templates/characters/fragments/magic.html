{% extends 'characters/fragments/fragment_base.html' %}
{% load characters_extras rules_extras i18n thumbnail %}

{% block fragment %}
    {% if object.extension_enabled.magic %}
        {% if may_edit %}
            <div class="row">
                <div class="col-12">
                    <button
                            class="btn btn-primary float-end mb-2 modal-trigger"
                            data-bs-toggle="modal"
                            data-bs-target=".page-modal"
                            {% if object.world.select_spells_by == 't' %}
                                data-url="{% url 'characters:xhr_add_spell' pk=object.id %}"
                            {% else %}
                                data-url="{% url 'characters:xhr_add_spell_by_origin' pk=object.id %}"
                            {% endif %}
                            data-modal-title="{% trans 'Add a spell' %}">
                        <i class="fa fa-magic text-warning"></i> Add a spell <small>({{ object.spell_points_available }} {% trans 'Spell Points' %})</small>
                    </button>
                    {% if user.is_authenticated %}
                        <a
                                class="btn btn-warning float-end mb-2 me-2 modal-trigger"
                                data-url="{% url 'homebrew:xhr_create_base_spell' %}?character_pk={{ object.id }}"
                                title="{% trans 'Create Spell' %}"
                                data-bs-toggle="modal"
                                data-modal-title="{% trans 'Create Spell' %}"
                                data-bs-target=".page-modal"
                                href=""><i class="fa fa-plus"></i> {% trans 'Create Spell' %}</a>
                    {% endif %}
                </div>
            </div>
        {% endif %}
        <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 masonry-container">
            {% include 'characters/includes/character_spell_cards.html' %}
        </div>
    {% endif %}
{% endblock %}
