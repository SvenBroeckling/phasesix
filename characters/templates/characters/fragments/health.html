{% extends 'characters/fragments/fragment_base.html' %}
{% load i18n characters_extras %}

{% block fragment %}
    <div class="row">
        <div class="col-12 col-md-4 mb-5">
            <div class="card h-100 text-center">
                <div class="card-header">
                    {% trans 'Status' %}
                </div>
                <div class="card-body">
                    <div>
                        {% for i in object.health|to_range %}
                            <i class="fas fa-heart text-danger" data-bs-toggle="popover" data-bs-trigger="hover"
                               title="{% trans 'Health' %}"
                               data-bs-content="{% trans 'A full heart. This can compensate a wound. Use the character menu to take a wound.' %}"></i>
                        {% endfor %}
                        {% for i in object.wounds_taken|to_range %}
                            <i class="far fa-heart text-danger" data-bs-toggle="popover" data-bs-trigger="hover"
                               title="{% trans 'Wound' %}"
                               data-bs-content="{% trans 'A wound taken. This empty heart can be restored at a hospital.' %}"></i>
                        {% endfor %}
                        {% for i in object.boost|to_range %}
                            <i class="fas fa-heart text-info" data-bs-toggle="popover" data-bs-trigger="hover"
                               title="{% trans 'Boost' %}"
                               data-bs-content="{% trans 'A temporary boost, given by first aid or medicine. If you take damage this will expanded first.' %}"></i>
                        {% endfor %}
                    </div>
                    <div class="mt-2">
                        {% for cse in object.characterstatuseffect_set.all %}
                            <span class="fa-layers fa-fw fa-3x">
                                             <i
                                                     data-bs-toggle="popover"
                                                     title="{{ cse }}: {{ cse.value }}"
                                                     data-bs-content="{{ cse.rules|default:"no rules yet" }}"
                                                     data-bs-trigger="hover"
                                                     data-bs-html="true"
                                                     class="{{ cse.status_effect.fa_icon_class }}"></i>
                                             <span class="fa-layers-counter bg-danger">{{ cse.value }}</span>
                                             </span>
                        {% endfor %}
                    </div>

                    {% if object.extension_enabled.magic %}
                        <div>
                            {% for i in object.arcana|to_range %}
                                <i class="fas fa-magic text-warning" data-bs-toggle="popover"
                                   data-bs-trigger="hover" title="{% trans 'Arcana' %}"
                                   data-bs-content="{% trans 'Use this to cast spells at the magic or combat tab.' %}"></i>
                            {% endfor %}
                        </div>
                    {% endif %}

                    {% if object.extension_enabled.horror %}
                        <div>
                            {% for i in object.stress|to_range %}
                                <i class="fas fa-meh text-warning" data-bs-toggle="popover"
                                   data-bs-trigger="hover" title="{% trans 'Stress' %}"
                                   data-bs-content="{% trans 'This is your stress level. You will geht a quirk if it reaches your stress maximum.' %}"></i>
                            {% endfor %}
                            {% for i in object.available_stress|to_range %}
                                <i class="far fa-meh text-warning" data-bs-toggle="popover"
                                   data-bs-trigger="hover" title="{% trans 'Possible Stress' %}"
                                   data-bs-content="{% trans 'This is possible stress your can cope with. You will get a quirk if all slots are filled.' %}"></i>
                            {% endfor %}
                        </div>

                        <div>
                            {% for q in object.quirks.all %}
                                <i class="fas fa-frown text-dark" data-bs-toggle="popover" title="{{ q }}"
                                   data-bs-content="{{ q.get_modifier_summary_html }}" data-bs-trigger="hover"
                                   data-html="true"></i>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="col-12 col-md-4 mb-5">
            <div class="card h-100">
                <div class="card-header text-center">
                    {% trans 'Combat' %}
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <i class="fas fa-hourglass text-info" data-bs-toggle="popover" data-bs-trigger="hover"
                           title="{% trans 'Actions' %}"
                           data-bs-content="{% trans 'The amount of actions you can use in combat.' %}"></i>
                        {% trans 'Actions' %}
                        <span class="float-end">{% color_value_span object.actions 4 %}</span></li>
                    <li class="list-group-item">
                        <i class="fas fa-shield-alt text-success" data-bs-toggle="popover"
                           data-bs-trigger="hover" title="{% trans 'Ballistic Protection' %}"
                           data-bs-content="{% trans 'Protects you from ballistic shots at the defense roll.' %}"></i>
                        {% trans 'Protection' %}
                        <span class="float-end">{% color_value_span object.ballistic_protection 6 %}</span></li>
                    <li class="list-group-item">
                        <i class="fas fa-eye-slash text-danger" data-bs-toggle="popover" data-bs-trigger="hover"
                           title="{% trans 'Concealment' %}"
                           data-bs-content="{% trans 'This is the highest concealment among your equipment. It is relevant if somebody searches you for your equipment.' %}"></i>
                        {% trans 'Concealment' %}
                        <span class="float-end">{% color_value_span object.max_concealment 4 invert=True %}</span>
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-running text-success" data-bs-toggle="popover" data-bs-trigger="hover"
                           title="{% trans 'Evasion' %}"
                           data-bs-content="{% trans 'The amount of evasion dice to evade being hit in combat.' %}"></i>
                        {% trans 'Evasion' %}
                        <span class="float-end">{% color_value_span object.evasion 6 %}</span></li>
                </ul>
            </div>
        </div>

        <div class="col-12 col-md-4 mb-5">
            <div class="card h-100">
                <div class="card-header text-center">
                    {% trans 'Dice' %}
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <i class="fas fa-dice-five text-warning" data-bs-toggle="popover"
                           data-bs-trigger="hover" data-html="true" title="{% trans 'Minimum Roll' %}"
                           data-bs-content="{% trans 'Reach this roll with a die to get a success.' %}"></i>
                        {% trans 'Minimum Roll' %}
                        <span class="float-end">{% color_value_span 5 5 invert=True %}+</span>
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-dice-six text-success" data-bs-toggle="popover" data-bs-trigger="hover"
                           data-html="true" title="{% trans 'Bonus Dice' %}"
                           data-bs-content="{% trans 'Add bonus dice to any roll in the game, or use them to create an additional action in combat at any time.<br><br>Bonus dice are expended on use and refresh at any rest.' %}"></i>
                        {% trans 'Bonus Dice' %}
                        <span class="float-end">{% color_value_span object.bonus_dice 3 %}</span>
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-dice-four text-danger" data-bs-toggle="popover" data-bs-trigger="hover"
                           data-html="true" title="{% trans 'Destiny Dice' %}"
                           data-bs-content="{% trans 'Destiny dice may be added to rolls just like bonus dice, but they always succeed on a 4+ roll. Additionally they may be used to steal an action in combat at any time.<br><br>Destiny dice are expended on use and refresh at a rest of at least 10 hours.' %}"></i>
                        {% trans 'Destiny Dice' %}
                        <span class="float-end">{% color_value_span object.destiny_dice 3 %}</span>
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-dice-one text-info" data-bs-toggle="popover" data-bs-trigger="hover"
                           data-html="true" title="{% trans 'Rerolls' %}"
                           data-bs-content="{% trans 'Use a reroll to roll any rolled die.<br><br>Rerolls are expended on use and refresh at any rest.' %}"></i>
                        {% trans 'Rerolls' %}
                        <span class="float-end">{% color_value_span object.rerolls 3 %}</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
{% endblock %}
