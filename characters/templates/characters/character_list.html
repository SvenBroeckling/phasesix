{% extends 'base.html' %}
{% load i18n static thumbnail characters_extras %}

{% block title %}{% trans 'My characters' %} - {{ block.super }}{% endblock %}

{% block javascript %}
    <script>
        $(function () {
            $('[data-bs-toggle="tab"].nav-link:first').addClass('active')
            $('.tab-pane:first').addClass('active')
        })
    </script>
{% endblock %}

{% block content %}
    <div class="d-flex justify-content-between flex-wrap">
        <h1>{% trans "Your Characters" %}</h1>
        {% with extension=request.world_configuration.world.extension %}
            {% if extension %}
                {% if extension.fixed_epoch %}
                    {% if extension.fixed_extensions.exists %}
                        <a class="btn btn-primary btn-lg float-end mb-2"
                           href="{% url 'characters:create_character_data' world_pk=extension.id epoch_pk=extension.fixed_epoch.id %}">{% trans 'Create a character' %}</a>
                    {% else %}
                        <a class="btn btn-primary btn-lg float-end mb-2"
                           href="{% url 'characters:create_character_extensions' world_pk=extension.id epoch_pk=extension.fixed_epoch.id %}">{% trans 'Create a character' %}</a>
                    {% endif %}
                {% else %}
                    <a class="btn btn-primary btn-lg float-end mb-2"
                       href="{% url 'characters:create_character_epoch' world_pk=extension.id %}">{% trans 'Create a character' %}</a>
                {% endif %}
            {% else %}
                <a class="btn btn-primary btn-lg float-end mb-2"
                   href="{% url 'characters:create_character' %}">{% trans 'Create a character' %}</a>
            {% endif %}
        {% endwith %}
    </div>

    {% if own_characters %}
        <div class="row character-list">
            {% for object in own_characters %}
                <div class="col-12 col-sm-6 col-md-6 mb-3">
                    {% include 'characters/_character_list_widget.html' %}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    {% if other_peoples_characters %}
        <div class="row character-list">
            <div class="col-12 my-2">
                <h2>{% trans "Other peoples characters" %}</h2>
                {% trans 'You can see these because you are an admin' %}
            </div>
            {% for object in other_peoples_characters %}
                <div class="col-12 col-sm-6 col-md-6 mb-3">
                    {% include "characters/_character_list_widget.html" %}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    {% if anonymous_characters %}
        <div class="row character-list">
            <div class="col-12 my-2">
                <h2>{% trans "Anonymous characters" %}</h2>
                {% trans 'You can see these because you are an admin' %}
            </div>
            {% for object in anonymous_characters %}
                <div class="col-12 col-sm-6 col-md-6 mb-3">
                    {% include "characters/_character_list_widget.html" %}
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}
